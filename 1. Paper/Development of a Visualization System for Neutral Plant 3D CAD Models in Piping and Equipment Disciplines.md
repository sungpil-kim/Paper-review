# 배관 및 기기 공종의 중랍 형식의 플랜트 3D CAD 모델 가시화 시스템 개발
 - 저자 : 김세윤, 이현오, 김병철, 문두환
 - 학회 : 한국CDE학회 논문집 (Korean Jounal of Computational Design and Engineering)

 
## 1. 서론
 - 공정 플랜트의 상세설계를 위한 플랜트 3D CAD 모델의 공유 방법으로 중립 모델을 사용하는 방안이 있다. 중립 형식의 플랜트 모델은 상세 설계 정보 확인에 이점이 있지만 기능의 제한 문제점이 있다. 따라서 3D CAD 모델의 가시화를 통해서 여러 설계 정보를 확인하는 시스템 개발이 필요하다.<br>
 ⇒ 이는 실제 다른 산업에서도 동일한 경우라고 생각한다. 자동차 산업의 경우에도 차량의 전체적인 데이터 취합을 위해서 .CATpart가 아닌 .cgr로 데이터를 교환한다. 이는 간단하게 각 부품의 위치와 간섭여부를 확인할때는 용이하지만 간섭량 파악등의 여러 기능을 사용할때 제한된다.
 
## 2. 중립 3D CAD 모델
 - 중립 3D 설계 정보 모델의 구조는 Plant System이라는 틀 안에 배관 공종인 Piping System과 기기 공종의 Mechanical System으로 설계정보가 구분된다. Piping System에는 각각의 Piping들의 집합으로 Segment의 연결 및 참조, 설계 속성 정보를 포함하고 있다. 이와 유사하게 Mechanial System의 경우 기기의 정보들이 포함되어 있다. 이때 중립 3D 설계 정보의 입력파일은 비형상 정보(XML 형식)과 형상 정보(SAT)로 구분된다. 비형상 정보에는 식별, 스펙, 형상, 연결 정보에 관한 참조 정보를 포함하고 형상 정보의 경우 branch단위로 구분되는 형상 정보를 포함하고 있다.
 
 - 저자는 가시화를 위해 중립 메타 모델을 확장한 스펙-카탈로그 모델로 변환하였다. 기존의 중립 모델이 Piping system이라는 큰 틀에서 분류되었다면, 해당 모델을 통해서 각각의 기자재를 식별하였다. 중립 스펙-카탈로그 모델은 스펙, 카탈로그, 분류체계 모델로 구성된다. 각각의 모델에 대한 설명은 아래와 같다.

- 스펙 모델(Spec model)
  1. 스펙(SPEC) : 조건별로 해당되는 카탈로그의 식별 역할
  2. 필터(SelectionFilter) : 기자재 선정을 위한 값 저장
  3. 필터클래스(SelectionFilterClass) : 기자재를 타입별로 선정하기 위한 속성 저장
  4. 속성 값(AttributeValue) : 속성에 대한 값을 저장하는 정보 객체
  5. 속성(Attribut) : 기자재 선정 시 필요한 속성 정보 저장 객체

- 중립 분류체계 모델(Part classification model)
  1. 클래스(Class) : 기자재 타입에 따른 사양 정보 저장
  2. 사양(Property) : 기자재 타입에 따른 사양 정보 저장
  3. 코드마스터(CodeMaster) : 기자재에 대한 속성 및 사양 정보에서 곹오적으로 기자재에서 사용되는 값들을 Code의 형태로 저장하는 정보 객체
  4. 코드(Code) : 값 단위(UnitOfValue), 열거 항목(EnumerationItem), 열거 유형(EnumerationType)

- 중립 카탈로그 모델(Catalog Model)
  1. 카탈로그(Catalog) : 특정 타입에 해당되는 기자재의 사양 정보 앖의 목록, 형상 정보 등이 저장
  2. 사양 정보 값(Property Value) : 사양 정보에 대한 값이 저장
 
 - fig와 설명을 참조하여 참고용으로 아래 그림과 같이 구성해보았다. pipesegment의 일부분이 입력되면 

  <img width="1923" height="927" alt="Image" src="https://github.com/user-attachments/assets/fe816f07-abb9-40ea-a625-f9131857abd0" />

## 3. 중립 플랜트 3D CAD 모델 가시화
  -  비형상 정보(XML 형식)의 파일을 트리 형태로 목록을 보여주고, 각각의 설계 정보를 속성 창을 통해 확인. 필요한 부품, 모델을 선택할 시, SAT파일을 메쉬 형식으로 변환 후 3D 형상 정보를 가시화한다. 이때 형상 강조(highlight) 기능을 제공한다.<br>
  ⇒ B-REP을 MESH로 바꾸는 이유는 렌더링 효율을 위해서로 파악된다.

## 4. 중립 플랜트 3D 가시화의 과정
 - 논문 내 fig 6, 7의 모델을 통해 아래의 과정으로 3D CAD의 가시화가 진행된다.
   1. User ⇒ VisualizeAPP (User의 데이터 선택)
   2. VisualizeAPP ⇒ VisualizeDocument (트리뷰 데이터 시스템에 요청)
   3. VisualizeDocument -> VisualizeMainFrame (트리뷰 업데이트)
   4. VisualizeMainFrame -> VisualizeView (3D 형상 표시 영역 생성)
   5. VisualizeMainFrame -> VisualizeView (속성 업데이트)
   6. VisualizeAPP -> VisualizeDocument (강조 및 가시화 요청)
   7. VisualizeView -> 강조(Highlight) 및 가시화(Visualize)
   8. VisualizeAPP -> VisualizeDocument (강조 상태 업데이트)

## 5. 구현 및 결론
합성가스(synthesized natural gas) 생산 플랜트 모델을 테스트 데이터로 활용하여 프로토타입 시스템을 구성하였다. 시스템은 이전에 논의된 이론과 설계에 따라, 기존 CAD 설계 데이터를 중립 플랜트 3D CAD 모델 형식으로 변환한다. 이 과정에서 설계 데이터는 비형상 정보(XML 형식, 보조 정보)와 형상 정보(SAT 형식,  3D 모양 데이터)로 분리되어 시스템의 내부 데이터 구조로 저장된다. <br>
이를 통해 사용자는 다음을 수행할 수 있다.
* **3D CAD 모델 가시화 및 강조 표시** : 변환된 형상 데이터를 바탕으로 3D 모델 화면에 가시화 및 강조 표시
* **스펙-카탈로그 정보 표시** : User가 선택한 부품에 대한 스펙-카탈로그 정보가 별도의 창에 표시

이러한 가시화 및 정보 표시 기능을 통해 User는 선택한 데이터(특정 부품 등)가 3D 형상 및 관련 스펙-카탈로그 정보와 함께 화면에 정확하게 표시되는지 시각적으로 확인이 가능하다. 이는 설계된 플랜트 모델의 정확성과 데이터 연동의 유효성을 검증하는 중요한 역할을 할수있다

## 6. 리뷰
3D CAD 모델인 CATIA에서도 유사한 기능이 존재한다. CATIA내의 와이어링 툴에서는 와이어링의 두께나 slack에 따라 해당 형상이 실제로 구현되는지 여부를 파악하고, 불가 시 빨간색으로 강조 표시가 된다. 또한 tree내에 느낌표 표시로 어떤 segment에서 오류가 발생하였는지 확인이 가능하다.<br>
이처럼 설계 과정에서의 오류나 정합성을 검증할 때 설계자가 모든 부분을 파악하고 확인하는 것은 매우 어렵다. 이와 같은 기능을 통해서 문제를 파악하고 해결함으로써 시간의 단축과 효율성이 올라갈 수 있다고 생각한다. <br>

3D CAD 모델의 가시화 및 강조에서 추가로 생각할 수 있는 부분은 '오류 발생여부의 개선'이라고 생각한다. 가령 맞춤법 검사기의 프로그램에서는 실제 문제점을 발견하고 이에 대해 수정본을 제시하며 확인여부를 파악한다. 이처럼 3D CAD모델에서도 해당 문제점에 대해 가시화 및 강조뿐만 아니라, 부품의 스펙-카탈로그 상에 잘못된 값에 대해 올바른 값을 제시하고 수정여부를 확인하는 기능이 추가된다면 더욱 효율성이 높아질 것이라고 생각된다.
